<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="I have been working on a project to automate all things network related. Not only provisioning new stuff but operations as well. I am not going to tell you about the benefits of automation, everybody should know by now.
However, when talking about operations it is important to note that not all operations can be automated but all operations can be abstracted. What I mean with that is that if you are peering with someone you still have to perform some action so your system knows who the new peer is, their IP address, their AS and where are you going to peer with them. However, the operator doesn&#39;t need to know that it has to go to the inventory system to add the new peer, then go to the IPAM system to insert the required information and finally configuring the peer on the router. You could abstract that entire repetitive and error prone workflow with a single command: add peer in=bma ip=10.0.0.1 as=65100.
" />
<meta name="keywords" content="development programming network automation orchestration golang python napalm nornir gornir yang yangify" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://www.dravetech.com/2016/03/30/chatops-demo-for-networking/" />


    <title>
        
            ChatOps Demo for Networking :: Dravetech  — Random thoughts
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.min.7bfbbe12786fa0ded4b4c0d792cbb36a5bd0bdb0b856dde57aa7b1f6fe0f2b87.css">


    
        <link rel="stylesheet" type="text/css" href="/css/callout.css">
    



<meta itemprop="name" content="ChatOps Demo for Networking">
<meta itemprop="description" content="I have been working on a project to automate all things network related. Not only provisioning new
stuff but operations as well. I am not going to tell you about the benefits of automation, everybody should know by now.
However, when talking about operations it is important to note that not all operations can be
automated but all operations can be abstracted. What I mean with that is that if you are
peering with someone you still have to perform some action so your system knows who the new peer
is, their IP address, their AS and where are you going to peer with them. However, the operator
doesn&#39;t need to know that it has to go to the inventory system to add the new peer, then go to the
IPAM system to insert the required information and finally configuring the peer on the router. You
could abstract that entire repetitive and error prone workflow with a single command: add peer in=bma ip=10.0.0.1 as=65100.">
<meta itemprop="datePublished" content="2016-03-30T18:00:00&#43;02:00" />
<meta itemprop="dateModified" content="2016-03-30T18:00:00&#43;02:00" />
<meta itemprop="wordCount" content="485">
<meta itemprop="image" content="https://www.dravetech.com/"/>



<meta itemprop="keywords" content="ops,automation,networking," /><meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://www.dravetech.com/"/>

<meta name="twitter:title" content="ChatOps Demo for Networking"/>
<meta name="twitter:description" content="I have been working on a project to automate all things network related. Not only provisioning new
stuff but operations as well. I am not going to tell you about the benefits of automation, everybody should know by now.
However, when talking about operations it is important to note that not all operations can be
automated but all operations can be abstracted. What I mean with that is that if you are
peering with someone you still have to perform some action so your system knows who the new peer
is, their IP address, their AS and where are you going to peer with them. However, the operator
doesn&#39;t need to know that it has to go to the inventory system to add the new peer, then go to the
IPAM system to insert the required information and finally configuring the peer on the router. You
could abstract that entire repetitive and error prone workflow with a single command: add peer in=bma ip=10.0.0.1 as=65100."/>





    <meta property="article:published_time" content="2016-03-30 18:00:00 &#43;0200 CEST" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">dravetech</span>
            <span class="logo__cursor" style=""></span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://www.dravetech.com/posts">blog</a></li><li><a href="https://www.dravetech.com/tags/presos">presos</a></li><li><a href="https://www.dravetech.com/about">about</a></li><li><a href="https://www.dravetech.com/tags">tags</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle unselectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>3 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title">
                <a href="https://www.dravetech.com/2016/03/30/chatops-demo-for-networking/">ChatOps Demo for Networking</a>
            </h1>

            

            <div class="post-content">
                <p>I have been working on a project to automate all things network related. Not only provisioning new
stuff but operations as well. I am not going to tell you about the benefits of automation, everybody should know by now.</p>
<p>However, when talking about operations it is important to note that <strong>not all operations can be
automated but all operations can be abstracted</strong>. What I mean with that is that if you are
peering with someone you still have to perform some action so your system knows who the new peer
is, their IP address, their AS and where are you going to peer with them. However, the operator
doesn't need to know that it has to go to the inventory system to add the new peer, then go to the
IPAM system to insert the required information and finally configuring the peer on the router. You
could abstract that entire repetitive and error prone workflow with a single command: <code>add peer in=bma ip=10.0.0.1 as=65100</code>.</p>
<h2 id="demo">Demo</h2>
<p>As I was exploring how to do operations better ensuring consistency and keeping everybody in the
loop I realized that chatops was the answer. So I started working on a simple proof of concept.</p>
<ol>
<li>Operations are performed via <code>ansible</code> + <code>napalm</code>.</li>
<li>Details of <code>ansible</code> are abstracted by Python <code>invoke</code>.</li>
<li><code>Stackstorm</code> allows operators to fire <code>invoke</code> tasks from slack.</li>
<li>Devices can report critical changes to operators on slack via <code>stackstorm</code>.</li>
</ol>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/JQimPMpV0To" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<div class="bs-callout bs-callout-info">
I will be sharing the code for the demo very soon. Stay tuned : )
</div>

<p>The example is very simple, I was just trying to prove the feasibility and the value. As I see it,
these are the main benefits:</p>
<ol>
<li>Changes are standardized. If you are an operator you can only perform changes that are exposed to
you.</li>
<li>Everybody is in the loop. You are doing your job on a specific slack channel which means
everybody knows what you are up to. Something broke 30 minutes ago? Let's just scroll up the slack
channel and see if someone did some change then.</li>
<li>Operators are notified by switches almost instantly about critical events on slack. Why keep
switching between mail, pager, slack, the terminal, etc.? That's just overhead.</li>
</ol>
<h2 id="faq">FAQ</h2>
<p>Some common questions I got :)</p>
<ol>
<li>
<p><strong>Why <code>ansible</code>? Why not use <code>stackstorm</code> directly?</strong></p>
<p>Main reason was to be able to perform operations even in the event of stackstorm being down, unreachable,
etc. It's also an interesting framework for operations used by many people so using <code>ansible</code> will
save a lot of work as we can reuse other's people code and contribute back.</p>
</li>
<li>
<p><strong>Why abstract playbooks with <code>invoke</code>?</strong></p>
<p>We care about operations, not about playbooks. By abstracting <code>ansible</code> with <code>invoke</code> tasks we
can change playbooks and restructure things later on without impacting operations.</p>
</li>
<li>
<p><strong>Why are the examples so simple?</strong></p>
<p>It's just a proof of concept so I build something simple that everybody in the networking world could
relate to.</p>
</li>
</ol>
<h2 id="links">Links</h2>
<ul>
<li><a href="https://github.com/napalm-automation/napalm">napalm</a></li>
<li><a href="https://www.ansible.com/">ansible</a></li>
<li><a href="http://www.pyinvoke.org/">invoke</a></li>
<li><a href="https://stackstorm.com/">StackStorm</a></li>
</ul>
            </div>
        </article>

        <hr />

        <div class="post-info">
                <p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://www.dravetech.com/tags/ops">ops</a></span><span class="tag"><a href="https://www.dravetech.com/tags/automation">automation</a></span><span class="tag"><a href="https://www.dravetech.com/tags/networking">networking</a></span>
                </p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>485 Words</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2016-03-30 18:00 &#43;0200</p>
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h">Read other posts</span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="https://www.dravetech.com/2016/05/06/openconfig-napalm/">
                                <span class="button__icon">←</span>
                                <span class="button__text">OpenConfig &#43; NAPALM</span>
                            </a>
                        </span>
                    

                    
                        <span class="button next">
                            <a href="https://www.dravetech.com/2016/01/28/two-sdn-internet-router-sir-posts/">
                                <span class="button__text">Two SDN Internet Router (SIR) posts</span>
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        

        

<script src="https://utteranc.es/client.js"
        repo="dbarrosop/dbarrosop.github.io"
        issue-term="pathname"
        label="comments"
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script>

    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2019</span>
            
            <span>David Barroso Pardo</span>
            <span> <a href="https://www.dravetech.com/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/rhazdon">rhazdon</a></span>
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="/bundle.min.2d5469329143160ae2456a69c3c76dc2d0a3b212b46afe291a51bd68650ed6f8697e001dab54f1c272c77ce08092a8c55e5bb4314e0ee334aab4b927ec896638.js" integrity="sha512-LVRpMpFDFgriRWppw8dtwtCjshK0av4pGlG9aGUO1vhpfgAdq1TxwnLHfOCAkqjFXlu0MU4O4zSqtLkn7IlmOA=="></script>



    </body>
</html>
